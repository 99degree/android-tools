# adbd - run adb debugging shell
#
# This task enables the adb shell

description	"start adbd"

start on filesystem or runlevel [2345]
stop on runlevel [!2345]

pre-start script
	[ ! -d /sys/class/android_usb ] && { stop; exit 0; }
	echo 0 >/sys/class/android_usb/android0/enable
	echo 18d1 >/sys/class/android_usb/android0/idVendor
	echo D002 >/sys/class/android_usb/android0/idProduct
	echo adb >/sys/class/android_usb/android0/functions
	echo 1 >/sys/class/android_usb/android0/enable
end script

exec /usr/bin/adbd
